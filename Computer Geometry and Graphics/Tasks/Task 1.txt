Лабораторная работа 1

Написать программу, выполняющую простые преобразования изображений в формате PNM.
Программа должна поддерживать серые и цветные изображения (варианты PNM P5 и P6), самостоятельно определяя формат по содержимому.

Аргументы программе передаются через командную строку:
lab#.exe <имя_входного_файла> <имя_выходного_файла> <преобразование>
где <преобразование>:

0 - инверсия,
1 - зеркальное отражение по горизонтали,
2 - зеркальное отражение по вертикали,
3 - поворот на 90 градусов по часовой стрелке,
4 - поворот на 90 градусов против часовой стрелки.

Программа должна быть написана на C/C++ и не использовать внешние библиотеки.

Частичное решение: работают преобразования 0-2; имена файлов и преобразование, возможно, написаны в исходном коде или читаются с консоли, а не берутся из командной строки.
Полное решение: всё работает + корректно выделяется и освобождается память, закрываются файлы, есть обработка ошибок: не удалось открыть файл, формат файла не поддерживается, не удалось выделить память.

